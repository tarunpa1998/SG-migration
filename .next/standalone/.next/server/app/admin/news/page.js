(()=>{var e={};e.id=720,e.ids=[720],e.modules={1678:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>A});var r=t(60687),a=t(43210),i=t(16189),n=t(17456),l=t(35390),o=t(77636),d=t(76582),c=t(20776),h=t(19112),m=t(24298),u=t(7566),x=t(2734),p=t(65813),g=t(96474),j=t(99270),w=t(10022),y=t(65777),f=t(41862),v=t(57175),N=t(88233),b=t(81997);let C={title:"",content:"",summary:"",slug:"",publishDate:new Date().toISOString(),author:"",authorTitle:"",authorImage:"",image:"",category:"",isFeatured:!1,seo:{metaTitle:"",metaDescription:"",keywords:[]},views:0},k=()=>{let[e,s]=(0,a.useState)([]),[t,i]=(0,a.useState)(!0),[k,A]=(0,a.useState)(""),[S,E]=(0,a.useState)(null),[F,T]=(0,a.useState)(!1),[q,_]=(0,a.useState)(!1),[D,P]=(0,a.useState)("list"),[I,J]=(0,a.useState)(C),[L,U]=(0,a.useState)(!1),[$,z]=(0,a.useState)("basic"),{toast:R}=(0,u.d)();(0,a.useEffect)(()=>{M()},[]);let M=async()=>{i(!0);try{if(!localStorage.getItem("adminToken"))throw Error("Authentication required");let e=await fetch("/api/news");if(!e.ok)throw Error("Failed to fetch news");let t=await e.json();s(t)}catch(e){console.error("Error fetching news:",e),R({title:"Error fetching news",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}finally{i(!1)}},O=e=>{T(!0),J(e),E(e),_(!0),z("basic")},B=async t=>{if(confirm("Are you sure you want to delete this news item?"))try{let r=localStorage.getItem("adminToken");if(!r)throw Error("Authentication required");if(!(await fetch(`/api/admin/news/${t}`,{method:"DELETE",headers:{"x-auth-token":r}})).ok)throw Error("Failed to delete news");s(e.filter(e=>e._id!==t&&e.id!==t)),R({title:"News deleted",description:"The news item has been deleted successfully",variant:"default"})}catch(e){console.error("Error deleting news:",e),R({title:"Error deleting news",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}},G=async()=>{U(!0);try{let t=localStorage.getItem("adminToken");if(!t)throw Error("Authentication required");if(!I.title||!I.content||!I.summary)throw Error("Title, content, and summary are required");let r={...I,seo:{...I.seo,keywords:"string"==typeof I.seo.keywords?String(I.seo.keywords).split(",").map(e=>e.trim()).filter(Boolean):I.seo.keywords}},a=S?.id||S?._id,i=F?`/api/admin/news/${a}`:"/api/admin/news",n=await fetch(i,{method:F?"PUT":"POST",headers:{"Content-Type":"application/json","x-auth-token":t},body:JSON.stringify(r)});if(!n.ok){let e=await n.json();throw Error(e.error||"Failed to save news")}let l=await n.json();F?s(e.map(e=>e.id===l.id||e._id===l._id?l:e)):s([...e,l]),_(!1),R({title:F?"News updated":"News created",description:F?"The news has been updated successfully":"A new news item has been created successfully",variant:"default"})}catch(e){console.error("Error saving news:",e),R({title:"Error saving news",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}finally{U(!1)}},X=e=>{let{name:s,value:t}=e.target;if(s.includes(".")){let[e,r]=s.split(".");"seo"===e?J({...I,seo:{...I.seo,[r]:t}}):J({...I,[e]:{..."object"==typeof I[e]&&null!==I[e]?I[e]:{},[r]:t}})}else J({...I,[s]:t})},H=(e,s)=>{J({...I,[e]:s})},Z=e.filter(e=>e.title.toLowerCase().includes(k.toLowerCase())||e.summary.toLowerCase().includes(k.toLowerCase())||e.category.toLowerCase().includes(k.toLowerCase()));return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"News"}),(0,r.jsx)("p",{className:"text-slate-500 mt-2",children:"Manage all your news items"})]}),(0,r.jsxs)(l.$,{onClick:()=>{T(!1),J(C),E(null),_(!0),z("basic")},children:[(0,r.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"Create News Item"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,r.jsx)(j.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-500"}),(0,r.jsx)(o.p,{type:"search",placeholder:"Search news...",className:"pl-8",value:k,onChange:e=>A(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(l.$,{variant:"list"===D?"secondary":"ghost",size:"icon",onClick:()=>P("list"),children:(0,r.jsx)(w.A,{className:"h-4 w-4"})}),(0,r.jsx)(l.$,{variant:"grid"===D?"secondary":"ghost",size:"icon",onClick:()=>P("grid"),children:(0,r.jsx)(y.A,{className:"h-4 w-4"})})]})]}),t?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(f.A,{className:"h-10 w-10 animate-spin text-primary-500"})}):(0,r.jsx)(r.Fragment,{children:"list"===D?(0,r.jsx)(n.Zp,{children:(0,r.jsx)(n.Wu,{className:"p-0",children:(0,r.jsxs)(c.XI,{children:[(0,r.jsx)(c.A0,{children:(0,r.jsxs)(c.Hj,{children:[(0,r.jsx)(c.nd,{children:"Title"}),(0,r.jsx)(c.nd,{children:"Author"}),(0,r.jsx)(c.nd,{children:"Category"}),(0,r.jsx)(c.nd,{children:"Published"}),(0,r.jsx)(c.nd,{children:"Featured"}),(0,r.jsx)(c.nd,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(c.BF,{children:0===Z.length?(0,r.jsx)(c.Hj,{children:(0,r.jsx)(c.nA,{colSpan:6,className:"text-center text-slate-500 py-10",children:"No news items found"})}):Z.map(e=>(0,r.jsxs)(c.Hj,{children:[(0,r.jsx)(c.nA,{className:"font-medium",children:e.title}),(0,r.jsx)(c.nA,{children:e.author}),(0,r.jsx)(c.nA,{children:e.category}),(0,r.jsx)(c.nA,{children:new Date(e.publishDate).toLocaleDateString()}),(0,r.jsx)(c.nA,{children:e.isFeatured?(0,r.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:"Yes"}):(0,r.jsx)("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-xs font-medium text-slate-800",children:"No"})}),(0,r.jsx)(c.nA,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>O(e),children:(0,r.jsx)(v.A,{className:"h-4 w-4"})}),(0,r.jsx)(l.$,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>B(e.id||e._id||""),children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})]})})]},e.id||e._id))})]})})}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:0===Z.length?(0,r.jsx)("div",{className:"col-span-full text-center text-slate-500 py-10",children:"No news items found"}):Z.map(e=>(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-lg text-ellipsis overflow-hidden whitespace-nowrap",title:e.title,children:e.title}),(0,r.jsxs)(n.BT,{className:"flex justify-between",children:[(0,r.jsx)("span",{children:e.author}),(0,r.jsx)("span",{children:new Date(e.publishDate).toLocaleDateString()})]})]}),(0,r.jsx)(n.Wu,{className:"pb-2",children:(0,r.jsx)("p",{className:"text-sm text-slate-500 line-clamp-2",children:e.summary})}),(0,r.jsxs)(n.wL,{className:"justify-between",children:[(0,r.jsx)("div",{children:e.isFeatured&&(0,r.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:"Featured"})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>O(e),children:(0,r.jsx)(v.A,{className:"h-4 w-4"})}),(0,r.jsx)(l.$,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>B(e.id||e._id||""),children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})]})]})]},e.id||e._id))})}),(0,r.jsx)(m.lG,{open:q,onOpenChange:_,children:(0,r.jsxs)(m.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(m.c7,{children:[(0,r.jsx)(m.L3,{children:F?"Edit News":"Create New News Item"}),(0,r.jsx)(m.rr,{children:F?"Make changes to the news item":"Add a new news item to your collection"})]}),(0,r.jsxs)(x.tU,{value:$,onValueChange:z,children:[(0,r.jsxs)(x.j7,{className:"grid grid-cols-3 mb-6",children:[(0,r.jsx)(x.Xi,{value:"basic",children:"Basic Info"}),(0,r.jsx)(x.Xi,{value:"content",children:"Content"}),(0,r.jsx)(x.Xi,{value:"seo",children:"SEO & Metadata"})]}),(0,r.jsx)(x.av,{value:"basic",className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"title",children:"Title *"}),(0,r.jsx)(o.p,{id:"title",name:"title",value:I.title,onChange:X,placeholder:"News title",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"category",children:"Category *"}),(0,r.jsx)(o.p,{id:"category",name:"category",value:I.category,onChange:X,placeholder:"News category",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"publishDate",children:"Publish Date"}),(0,r.jsx)(o.p,{id:"publishDate",name:"publishDate",type:"date",value:I.publishDate.split("T")[0],onChange:X})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"image",children:"Featured Image URL"}),(0,r.jsx)(o.p,{id:"image",name:"image",value:I.image,onChange:X,placeholder:"https://example.com/image.jpg"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"summary",children:"Summary *"}),(0,r.jsx)(h.T,{id:"summary",name:"summary",value:I.summary,onChange:X,placeholder:"Brief overview of the news",required:!0,rows:3})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"author",children:"Author *"}),(0,r.jsx)(o.p,{id:"author",name:"author",value:I.author,onChange:X,placeholder:"Author name",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"authorTitle",children:"Author Title"}),(0,r.jsx)(o.p,{id:"authorTitle",name:"authorTitle",value:I.authorTitle,onChange:X,placeholder:"e.g. Senior Editor"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"authorImage",children:"Author Image URL"}),(0,r.jsx)(o.p,{id:"authorImage",name:"authorImage",value:I.authorImage,onChange:X,placeholder:"https://example.com/author.jpg"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.S,{id:"isFeatured",checked:I.isFeatured,onCheckedChange:e=>H("isFeatured",e)}),(0,r.jsx)(d.J,{htmlFor:"isFeatured",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Feature this news item (will be displayed prominently)"})]})]})}),(0,r.jsx)(x.av,{value:"content",className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"content",children:"Content *"}),(0,r.jsx)(b.A,{content:I.content,onChange:e=>{J({...I,content:e})},placeholder:"Start writing your news content...",className:"min-h-[400px]"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Supports rich text formatting and markdown"})]})}),(0,r.jsxs)(x.av,{value:"seo",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"seo.metaTitle",children:"Meta Title"}),(0,r.jsx)(o.p,{id:"seo.metaTitle",name:"seo.metaTitle",value:I.seo.metaTitle,onChange:X,placeholder:"SEO title (if different from news title)"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"If left empty, the news title will be used"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"seo.metaDescription",children:"Meta Description"}),(0,r.jsx)(h.T,{id:"seo.metaDescription",name:"seo.metaDescription",value:I.seo.metaDescription,onChange:X,placeholder:"SEO description",rows:3}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"If left empty, the news summary will be used"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"seo.keywords",children:"Keywords"}),(0,r.jsx)(o.p,{id:"seo.keywords",name:"seo.keywords",value:Array.isArray(I.seo.keywords)?I.seo.keywords.join(", "):I.seo.keywords,onChange:X,placeholder:"keyword1, keyword2, keyword3"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Comma-separated list of keywords"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(d.J,{htmlFor:"slug",children:"URL Slug *"}),(0,r.jsx)(o.p,{id:"slug",name:"slug",value:I.slug,onChange:X,placeholder:"news-url-slug",required:!0}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"The slug will be used in the news URL (e.g., /news/news-url-slug)"})]})]})]}),(0,r.jsxs)(m.Es,{children:[(0,r.jsx)(l.$,{variant:"outline",onClick:()=>_(!1),disabled:L,children:"Cancel"}),(0,r.jsx)(l.$,{onClick:G,disabled:L,children:L?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),F?"Updating...":"Creating..."]}):F?"Update News":"Create News"})]})]})})]})};function A(){return(0,i.useRouter)(),(0,r.jsx)("div",{className:"container mx-auto py-10",children:(0,r.jsx)(k,{})})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},18593:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=t(65239),a=t(48088),i=t(88170),n=t.n(i),l=t(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d={children:["",{children:["admin",{children:["news",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,89883)),"/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/admin/news/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,31142)),"/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/admin/news/page.tsx"],h={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/news/page",pathname:"/admin/news",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33261:(e,s,t)=>{Promise.resolve().then(t.bind(t,1678))},33873:e=>{"use strict";e.exports=require("path")},35469:(e,s,t)=>{Promise.resolve().then(t.bind(t,89883))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},89883:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/admin/news/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/admin/news/page.tsx","default")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4447,7696,6620,1797,3759,880],()=>t(18593));module.exports=r})();