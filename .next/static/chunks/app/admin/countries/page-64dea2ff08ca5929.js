(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7319],{4516:(e,s,i)=>{"use strict";i.d(s,{A:()=>a});let a=(0,i(19946).A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},20922:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>E});var a=i(95155),t=i(12115),r=i(35695),n=i(52338),l=i(78496),c=i(492),o=i(25930),d=i(14236),h=i(75234),m=i(16784),u=i(9436),x=i(28452),p=i(87027),j=i(84616),g=i(47924),y=i(57434),f=i(14541),v=i(51154),N=i(89917),C=i(62525);let w=(0,i(19946).A)("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);var k=i(4516),A=i(90424);let S={name:"",description:"",shortDescription:"",slug:"",flag:"",continent:"",languagesSpoken:[],universities:0,costOfLiving:"",popularCities:[],educationSystem:"",visaRequirements:"",scholarships:[],image:"",featured:!1,seo:{metaTitle:"",metaDescription:"",keywords:[]}},b=()=>{let[e,s]=(0,t.useState)([]),[i,r]=(0,t.useState)(!0),[b,E]=(0,t.useState)(""),[F,T]=(0,t.useState)(null),[D,J]=(0,t.useState)(!1),[L,q]=(0,t.useState)(!1),[_,O]=(0,t.useState)("list"),[U,R]=(0,t.useState)(S),[B,I]=(0,t.useState)(!1),[$,z]=(0,t.useState)("basic"),{toast:M}=(0,u.d)();(0,t.useEffect)(()=>{P()},[]);let P=async()=>{r(!0);try{if(!localStorage.getItem("adminToken"))throw Error("Authentication required");let e=await fetch("/api/countries");if(!e.ok)throw Error("Failed to fetch countries");let i=await e.json();s(i)}catch(e){console.error("Error fetching countries:",e),M({title:"Error fetching countries",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}finally{r(!1)}},X=e=>{J(!0),R(e),T(e),q(!0),z("basic")},H=async i=>{if(confirm("Are you sure you want to delete this country?"))try{let a=localStorage.getItem("adminToken");if(!a)throw Error("Authentication required");if(!(await fetch("/api/admin/countries/".concat(i),{method:"DELETE",headers:{"x-auth-token":a}})).ok)throw Error("Failed to delete country");s(e.filter(e=>e._id!==i&&e.id!==i)),M({title:"Country deleted",description:"The country has been deleted successfully",variant:"default"})}catch(e){console.error("Error deleting country:",e),M({title:"Error deleting country",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}},Z=async()=>{I(!0);try{let i=localStorage.getItem("adminToken");if(!i)throw Error("Authentication required");if(!U.name||!U.description)throw Error("Name and description are required");let a={...U,languagesSpoken:Array.isArray(U.languagesSpoken)?U.languagesSpoken:String(U.languagesSpoken).split(",").map(e=>e.trim()).filter(Boolean),popularCities:Array.isArray(U.popularCities)?U.popularCities:String(U.popularCities).split(",").map(e=>e.trim()).filter(Boolean),scholarships:Array.isArray(U.scholarships)?U.scholarships:String(U.scholarships).split(",").map(e=>e.trim()).filter(Boolean),seo:{...U.seo,keywords:"string"==typeof U.seo.keywords?String(U.seo.keywords).split(",").map(e=>e.trim()).filter(Boolean):U.seo.keywords}},t=(null==F?void 0:F.id)||(null==F?void 0:F._id),r=await fetch(D?"/api/admin/countries/".concat(t):"/api/admin/countries",{method:D?"PUT":"POST",headers:{"Content-Type":"application/json","x-auth-token":i},body:JSON.stringify(a)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to save country")}let n=await r.json();D?s(e.map(e=>e.id===n.id||e._id===n._id?n:e)):s([...e,n]),q(!1),M({title:D?"Country updated":"Country created",description:D?"The country has been updated successfully":"A new country has been created successfully",variant:"default"})}catch(e){console.error("Error saving country:",e),M({title:"Error saving country",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}finally{I(!1)}},V=e=>{let{name:s,value:i}=e.target;if(s.includes(".")){let[e,a]=s.split(".");if("seo"===e)R({...U,seo:{...U.seo,[a]:i}});else{let s=U[e];s&&"object"==typeof s&&!Array.isArray(s)?R({...U,[e]:{...s,[a]:i}}):R({...U,[e]:{[a]:i}})}}else R({...U,[s]:i})},W=(e,s)=>{R({...U,[e]:s})},Y=e.filter(e=>e.name.toLowerCase().includes(b.toLowerCase())||e.continent.toLowerCase().includes(b.toLowerCase()));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Countries"}),(0,a.jsx)("p",{className:"text-slate-500 mt-2",children:"Manage study destination countries"})]}),(0,a.jsxs)(l.$,{onClick:()=>{J(!1),R(S),T(null),q(!0),z("basic")},children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Add Country"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,a.jsx)(g.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-500"}),(0,a.jsx)(c.p,{type:"search",placeholder:"Search countries...",className:"pl-8",value:b,onChange:e=>E(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.$,{variant:"list"===_?"secondary":"ghost",size:"icon",onClick:()=>O("list"),children:(0,a.jsx)(y.A,{className:"h-4 w-4"})}),(0,a.jsx)(l.$,{variant:"grid"===_?"secondary":"ghost",size:"icon",onClick:()=>O("grid"),children:(0,a.jsx)(f.A,{className:"h-4 w-4"})})]})]}),i?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(v.A,{className:"h-10 w-10 animate-spin text-primary-500"})}):(0,a.jsx)(a.Fragment,{children:"list"===_?(0,a.jsx)(n.Zp,{children:(0,a.jsx)(n.Wu,{className:"p-0",children:(0,a.jsxs)(d.XI,{children:[(0,a.jsx)(d.A0,{children:(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nd,{children:"Name"}),(0,a.jsx)(d.nd,{children:"Continent"}),(0,a.jsx)(d.nd,{children:"Universities"}),(0,a.jsx)(d.nd,{children:"Featured"}),(0,a.jsx)(d.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(d.BF,{children:0===Y.length?(0,a.jsx)(d.Hj,{children:(0,a.jsx)(d.nA,{colSpan:5,className:"text-center text-slate-500 py-10",children:"No countries found"})}):Y.map(e=>(0,a.jsxs)(d.Hj,{children:[(0,a.jsx)(d.nA,{className:"font-medium",children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.flag&&(0,a.jsx)("span",{className:"mr-2 text-xl",children:e.flag}),e.name]})}),(0,a.jsx)(d.nA,{children:e.continent}),(0,a.jsx)(d.nA,{children:e.universities}),(0,a.jsx)(d.nA,{children:e.featured?(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:"Yes"}):(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-xs font-medium text-slate-800",children:"No"})}),(0,a.jsx)(d.nA,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>X(e),children:(0,a.jsx)(N.A,{className:"h-4 w-4"})}),(0,a.jsx)(l.$,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>H(e.id||e._id||""),children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]})})]},e.id||e._id))})]})})}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:0===Y.length?(0,a.jsx)("div",{className:"col-span-full text-center text-slate-500 py-10",children:"No countries found"}):Y.map(e=>{var s;return(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"pb-2",children:[(0,a.jsxs)(n.ZB,{className:"text-lg flex items-center",children:[e.flag&&(0,a.jsx)("span",{className:"mr-2 text-xl",children:e.flag}),(0,a.jsx)("span",{className:"text-ellipsis overflow-hidden whitespace-nowrap",title:e.name,children:e.name})]}),(0,a.jsx)(n.BT,{children:e.continent})]}),(0,a.jsxs)(n.Wu,{className:"pb-2 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(w,{className:"h-4 w-4 mr-1 text-blue-600"}),(0,a.jsxs)("span",{children:[e.universities," Universities"]})]}),(null==(s=e.popularCities)?void 0:s.length)>0&&(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(k.A,{className:"h-4 w-4 mr-1 text-orange-600"}),(0,a.jsxs)("span",{className:"line-clamp-1",children:[Array.isArray(e.popularCities)?e.popularCities.slice(0,3).join(", "):e.popularCities,Array.isArray(e.popularCities)&&e.popularCities.length>3&&"..."]})]})]}),(0,a.jsxs)(n.wL,{className:"justify-between",children:[(0,a.jsx)("div",{children:e.featured&&(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:"Featured"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"icon",onClick:()=>X(e),children:(0,a.jsx)(N.A,{className:"h-4 w-4"})}),(0,a.jsx)(l.$,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>H(e.id||e._id||""),children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})]})]})]},e.id||e._id)})})}),(0,a.jsx)(m.lG,{open:L,onOpenChange:q,children:(0,a.jsxs)(m.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(m.c7,{children:[(0,a.jsx)(m.L3,{children:D?"Edit Country":"Create New Country"}),(0,a.jsx)(m.rr,{children:D?"Make changes to the country information":"Add a new study destination country to your platform"})]}),(0,a.jsxs)(x.tU,{value:$,onValueChange:z,children:[(0,a.jsxs)(x.j7,{className:"grid grid-cols-3 mb-6",children:[(0,a.jsx)(x.Xi,{value:"basic",children:"Basic Info"}),(0,a.jsx)(x.Xi,{value:"details",children:"Education Details"}),(0,a.jsx)(x.Xi,{value:"seo",children:"SEO & Metadata"})]}),(0,a.jsx)(x.av,{value:"basic",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"name",children:"Country Name *"}),(0,a.jsx)(c.p,{id:"name",name:"name",value:U.name,onChange:V,placeholder:"Country name",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"flag",children:"Flag Emoji"}),(0,a.jsx)(c.p,{id:"flag",name:"flag",value:U.flag,onChange:V,placeholder:"\uD83C\uDDFA\uD83C\uDDF8"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"continent",children:"Continent *"}),(0,a.jsx)(c.p,{id:"continent",name:"continent",value:U.continent,onChange:V,placeholder:"e.g. Europe, North America, etc.",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"universities",children:"Number of Universities"}),(0,a.jsx)(c.p,{id:"universities",name:"universities",type:"number",value:U.universities,onChange:V,placeholder:"e.g. 200"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"shortDescription",children:"Short Description *"}),(0,a.jsx)(h.T,{id:"shortDescription",name:"shortDescription",value:U.shortDescription,onChange:V,placeholder:"Brief overview of the country as a study destination",required:!0,rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"image",children:"Country Image URL"}),(0,a.jsx)(c.p,{id:"image",name:"image",value:U.image,onChange:V,placeholder:"https://example.com/image.jpg"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"languagesSpoken",children:"Languages Spoken"}),(0,a.jsx)(c.p,{id:"languagesSpoken",name:"languagesSpoken",value:Array.isArray(U.languagesSpoken)?U.languagesSpoken.join(", "):U.languagesSpoken,onChange:V,placeholder:"English, French, etc."}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Comma-separated list of languages"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"popularCities",children:"Popular Cities"}),(0,a.jsx)(c.p,{id:"popularCities",name:"popularCities",value:Array.isArray(U.popularCities)?U.popularCities.join(", "):U.popularCities,onChange:V,placeholder:"New York, Los Angeles, etc."}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Comma-separated list of cities"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.S,{id:"featured",checked:U.featured,onCheckedChange:e=>W("featured",e)}),(0,a.jsx)(o.J,{htmlFor:"featured",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Feature this country (will be displayed prominently)"})]})]})}),(0,a.jsx)(x.av,{value:"details",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"description",children:"Full Description *"}),(0,a.jsx)(A.A,{content:U.description,onChange:e=>{R({...U,description:e})},placeholder:"Start writing detailed country description...",className:"min-h-[400px]"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Provide detailed information about the country as a study destination"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"educationSystem",children:"Education System"}),(0,a.jsx)(h.T,{id:"educationSystem",name:"educationSystem",value:U.educationSystem,onChange:V,placeholder:"Describe the education system in the country",rows:4})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"costOfLiving",children:"Cost of Living"}),(0,a.jsx)(h.T,{id:"costOfLiving",name:"costOfLiving",value:U.costOfLiving,onChange:V,placeholder:"Typical cost of living for international students",rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"visaRequirements",children:"Visa Requirements"}),(0,a.jsx)(h.T,{id:"visaRequirements",name:"visaRequirements",value:U.visaRequirements,onChange:V,placeholder:"Information about student visa requirements",rows:4})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"scholarships",children:"Notable Scholarships"}),(0,a.jsx)(c.p,{id:"scholarships",name:"scholarships",value:Array.isArray(U.scholarships)?U.scholarships.join(", "):U.scholarships,onChange:V,placeholder:"Name of scholarship programs for this country"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Comma-separated list of notable scholarship programs"})]})]})}),(0,a.jsxs)(x.av,{value:"seo",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"seo.metaTitle",children:"Meta Title"}),(0,a.jsx)(c.p,{id:"seo.metaTitle",name:"seo.metaTitle",value:U.seo.metaTitle,onChange:V,placeholder:"SEO title (if different from country name)"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"If left empty, the country name will be used"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"seo.metaDescription",children:"Meta Description"}),(0,a.jsx)(h.T,{id:"seo.metaDescription",name:"seo.metaDescription",value:U.seo.metaDescription,onChange:V,placeholder:"SEO description",rows:3}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"If left empty, the short description will be used"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"seo.keywords",children:"Keywords"}),(0,a.jsx)(c.p,{id:"seo.keywords",name:"seo.keywords",value:Array.isArray(U.seo.keywords)?U.seo.keywords.join(", "):U.seo.keywords,onChange:V,placeholder:"keyword1, keyword2, keyword3"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Comma-separated list of keywords"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o.J,{htmlFor:"slug",children:"URL Slug *"}),(0,a.jsx)(c.p,{id:"slug",name:"slug",value:U.slug,onChange:V,placeholder:"country-url-slug",required:!0}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"The slug will be used in the country URL (e.g., /countries/country-url-slug)"})]})]})]}),(0,a.jsxs)(m.Es,{children:[(0,a.jsx)(l.$,{variant:"outline",onClick:()=>q(!1),disabled:B,children:"Cancel"}),(0,a.jsx)(l.$,{onClick:Z,disabled:B,children:B?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}),D?"Updating...":"Creating..."]}):D?"Update Country":"Create Country"})]})]})})]})};function E(){return(0,r.useRouter)(),(0,a.jsx)("div",{className:"container mx-auto py-10",children:(0,a.jsx)(b,{})})}},48364:(e,s,i)=>{Promise.resolve().then(i.bind(i,20922))}},e=>{var s=s=>e(e.s=s);e.O(0,[5004,277,4277,1615,2898,2208,1071,9613,6521,2356,8441,1684,7358],()=>s(48364)),_N_E=e.O()}]);