(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3912],{15993:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>k});var a=t(95155),l=t(12115),r=t(35695),i=t(52338),c=t(78496),n=t(492),d=t(25930),o=t(14236),h=t(75234),x=t(16784),m=t(9436),u=t(28452),p=t(87027),j=t(84616),g=t(47924),f=t(57434),y=t(14541),v=t(51154),w=t(89917),N=t(62525),C=t(90424);let A={title:"",content:"",excerpt:"",slug:"",publishDate:new Date().toISOString(),author:"",authorTitle:"",authorImage:"",image:"",category:"",tags:[],featured:!1,seo:{metaTitle:"",metaDescription:"",keywords:[]},views:0},b=()=>{let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)(!0),[b,k]=(0,l.useState)(""),[E,S]=(0,l.useState)(null),[T,F]=(0,l.useState)(!1),[D,L]=(0,l.useState)(!1),[J,I]=(0,l.useState)("list"),[_,U]=(0,l.useState)(A),[q,O]=(0,l.useState)(!1),[$,B]=(0,l.useState)("basic"),{toast:z}=(0,m.d)();(0,l.useEffect)(()=>{R()},[]);let R=async()=>{r(!0);try{let e=null;if(!(e=localStorage.getItem("adminToken")))throw Error("Authentication required");let t=await fetch("/api/articles");if(!t.ok)throw Error("Failed to fetch articles");let a=await t.json();s(a)}catch(e){console.error("Error fetching articles:",e),z({title:"Error fetching articles",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}finally{r(!1)}},M=e=>{F(!0),U(e),S(e),L(!0),B("basic")},P=async t=>{if(confirm("Are you sure you want to delete this article?"))try{let a=null;if(!(a=localStorage.getItem("adminToken")))throw Error("Authentication required");if(!(await fetch("/api/admin/articles/".concat(t),{method:"DELETE",headers:{"x-auth-token":a}})).ok)throw Error("Failed to delete article");s(e.filter(e=>e._id!==t&&e.id!==t)),z({title:"Article deleted",description:"The article has been deleted successfully",variant:"default"})}catch(e){console.error("Error deleting article:",e),z({title:"Error deleting article",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}},X=async()=>{O(!0);try{let t=null;if(!(t=localStorage.getItem("adminToken")))throw Error("Authentication required");if(!_.title||!_.content||!_.excerpt)throw Error("Title, content, and excerpt are required");let a={..._,tags:Array.isArray(_.tags)?_.tags:String(_.tags).split(",").map(e=>e.trim()).filter(Boolean),seo:{..._.seo,keywords:"string"==typeof _.seo.keywords?String(_.seo.keywords).split(",").map(e=>e.trim()).filter(Boolean):_.seo.keywords}},l=(null==E?void 0:E.id)||(null==E?void 0:E._id),r=await fetch(T?"/api/admin/articles/".concat(l):"/api/admin/articles",{method:T?"PUT":"POST",headers:{"Content-Type":"application/json","x-auth-token":t},body:JSON.stringify(a)});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to save article")}let i=await r.json();T?s(e.map(e=>e.id===i.id||e._id===i._id?i:e)):s([...e,i]),L(!1),z({title:T?"Article updated":"Article created",description:T?"The article has been updated successfully":"A new article has been created successfully",variant:"default"})}catch(e){console.error("Error saving article:",e),z({title:"Error saving article",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}finally{O(!1)}},H=e=>{let{name:s,value:t}=e.target;if(s.includes(".")){let[e,a]=s.split(".");if("seo"===e)U({..._,seo:{..._.seo,[a]:t}});else{let s=_[e];s&&"object"==typeof s&&!Array.isArray(s)?U({..._,[e]:{...s,[a]:t}}):U({..._,[e]:{[a]:t}})}}else U({..._,[s]:t})},Z=(e,s)=>{U({..._,[e]:s})},W=e.filter(e=>e.title.toLowerCase().includes(b.toLowerCase())||e.category.toLowerCase().includes(b.toLowerCase())||e.author.toLowerCase().includes(b.toLowerCase())||e.tags&&e.tags.some(e=>e.toLowerCase().includes(b.toLowerCase())));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Articles"}),(0,a.jsx)("p",{className:"text-slate-500 mt-2",children:"Manage all your articles"})]}),(0,a.jsxs)(c.$,{onClick:()=>{F(!1),U(A),S(null),L(!0),B("basic")},children:[(0,a.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Create Article"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,a.jsx)(g.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-500"}),(0,a.jsx)(n.p,{type:"search",placeholder:"Search articles...",className:"pl-8",value:b,onChange:e=>k(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(c.$,{variant:"list"===J?"secondary":"ghost",size:"icon",onClick:()=>I("list"),children:(0,a.jsx)(f.A,{className:"h-4 w-4"})}),(0,a.jsx)(c.$,{variant:"grid"===J?"secondary":"ghost",size:"icon",onClick:()=>I("grid"),children:(0,a.jsx)(y.A,{className:"h-4 w-4"})})]})]}),t?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)(v.A,{className:"h-10 w-10 animate-spin text-primary-500"})}):(0,a.jsx)(a.Fragment,{children:"list"===J?(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-0",children:(0,a.jsxs)(o.XI,{children:[(0,a.jsx)(o.A0,{children:(0,a.jsxs)(o.Hj,{children:[(0,a.jsx)(o.nd,{children:"Title"}),(0,a.jsx)(o.nd,{children:"Author"}),(0,a.jsx)(o.nd,{children:"Category"}),(0,a.jsx)(o.nd,{children:"Published"}),(0,a.jsx)(o.nd,{children:"Featured"}),(0,a.jsx)(o.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(o.BF,{children:0===W.length?(0,a.jsx)(o.Hj,{children:(0,a.jsx)(o.nA,{colSpan:6,className:"text-center text-slate-500 py-10",children:"No articles found"})}):W.map(e=>(0,a.jsxs)(o.Hj,{children:[(0,a.jsx)(o.nA,{className:"font-medium",children:e.title}),(0,a.jsx)(o.nA,{children:e.author}),(0,a.jsx)(o.nA,{children:e.category}),(0,a.jsx)(o.nA,{children:new Date(e.publishDate).toLocaleDateString()}),(0,a.jsx)(o.nA,{children:e.featured?(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:"Yes"}):(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-xs font-medium text-slate-800",children:"No"})}),(0,a.jsx)(o.nA,{className:"text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>M(e),children:(0,a.jsx)(w.A,{className:"h-4 w-4"})}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>P(e.id||e._id||""),children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})]})})]},e.id||e._id))})]})})}):(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:0===W.length?(0,a.jsx)("div",{className:"col-span-full text-center text-slate-500 py-10",children:"No articles found"}):W.map(e=>(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{className:"pb-2",children:[(0,a.jsx)(i.ZB,{className:"text-lg text-ellipsis overflow-hidden whitespace-nowrap",title:e.title,children:e.title}),(0,a.jsxs)(i.BT,{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e.author}),(0,a.jsx)("span",{children:new Date(e.publishDate).toLocaleDateString()})]})]}),(0,a.jsxs)(i.Wu,{className:"pb-2",children:[(0,a.jsx)("p",{className:"text-sm text-slate-500 line-clamp-2",children:e.excerpt}),e.tags&&e.tags.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.tags.slice(0,3).map((e,s)=>(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-2 py-0.5 text-xs font-medium text-blue-700",children:e},s)),e.tags.length>3&&(0,a.jsxs)("span",{className:"inline-flex items-center rounded-full bg-slate-50 px-2 py-0.5 text-xs font-medium text-slate-700",children:["+",e.tags.length-3]})]})]}),(0,a.jsxs)(i.wL,{className:"justify-between",children:[(0,a.jsx)("div",{children:e.featured&&(0,a.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:"Featured"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>M(e),children:(0,a.jsx)(w.A,{className:"h-4 w-4"})}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>P(e.id||e._id||""),children:(0,a.jsx)(N.A,{className:"h-4 w-4"})})]})]})]},e.id||e._id))})}),(0,a.jsx)(x.lG,{open:D,onOpenChange:L,children:(0,a.jsxs)(x.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:T?"Edit Article":"Create New Article"}),(0,a.jsx)(x.rr,{children:T?"Make changes to the article":"Add a new article to your collection"})]}),(0,a.jsxs)(u.tU,{value:$,onValueChange:B,children:[(0,a.jsxs)(u.j7,{className:"grid grid-cols-3 mb-6",children:[(0,a.jsx)(u.Xi,{value:"basic",children:"Basic Info"}),(0,a.jsx)(u.Xi,{value:"content",children:"Content"}),(0,a.jsx)(u.Xi,{value:"seo",children:"SEO & Metadata"})]}),(0,a.jsx)(u.av,{value:"basic",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"title",children:"Title *"}),(0,a.jsx)(n.p,{id:"title",name:"title",value:_.title,onChange:H,placeholder:"Article title",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"category",children:"Category *"}),(0,a.jsx)(n.p,{id:"category",name:"category",value:_.category,onChange:H,placeholder:"Article category",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"publishDate",children:"Publish Date"}),(0,a.jsx)(n.p,{id:"publishDate",name:"publishDate",type:"date",value:_.publishDate.split("T")[0],onChange:H})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"image",children:"Featured Image URL"}),(0,a.jsx)(n.p,{id:"image",name:"image",value:_.image,onChange:H,placeholder:"https://example.com/image.jpg"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"excerpt",children:"Excerpt *"}),(0,a.jsx)(h.T,{id:"excerpt",name:"excerpt",value:_.excerpt,onChange:H,placeholder:"Brief overview of the article",required:!0,rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"tags",children:"Tags"}),(0,a.jsx)(n.p,{id:"tags",name:"tags",value:Array.isArray(_.tags)?_.tags.join(", "):_.tags,onChange:H,placeholder:"study abroad, scholarships, etc."}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Comma-separated list of tags"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"author",children:"Author *"}),(0,a.jsx)(n.p,{id:"author",name:"author",value:_.author,onChange:H,placeholder:"Author name",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"authorTitle",children:"Author Title"}),(0,a.jsx)(n.p,{id:"authorTitle",name:"authorTitle",value:_.authorTitle,onChange:H,placeholder:"e.g. Education Consultant"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"authorImage",children:"Author Image URL"}),(0,a.jsx)(n.p,{id:"authorImage",name:"authorImage",value:_.authorImage,onChange:H,placeholder:"https://example.com/author.jpg"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.S,{id:"featured",checked:_.featured,onCheckedChange:e=>Z("featured",e)}),(0,a.jsx)(d.J,{htmlFor:"featured",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Feature this article (will be displayed prominently)"})]})]})}),(0,a.jsx)(u.av,{value:"content",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"content",children:"Content *"}),(0,a.jsx)(C.A,{content:_.content,onChange:e=>{U({..._,content:e})},placeholder:"Start writing your article content...",className:"min-h-[400px]"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Supports rich text formatting and markdown"})]})}),(0,a.jsxs)(u.av,{value:"seo",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"seo.metaTitle",children:"Meta Title"}),(0,a.jsx)(n.p,{id:"seo.metaTitle",name:"seo.metaTitle",value:_.seo.metaTitle,onChange:H,placeholder:"SEO title (if different from article title)"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"If left empty, the article title will be used"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"seo.metaDescription",children:"Meta Description"}),(0,a.jsx)(h.T,{id:"seo.metaDescription",name:"seo.metaDescription",value:_.seo.metaDescription,onChange:H,placeholder:"SEO description",rows:3}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"If left empty, the article excerpt will be used"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"seo.keywords",children:"Keywords"}),(0,a.jsx)(n.p,{id:"seo.keywords",name:"seo.keywords",value:Array.isArray(_.seo.keywords)?_.seo.keywords.join(", "):_.seo.keywords,onChange:H,placeholder:"keyword1, keyword2, keyword3"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Comma-separated list of keywords"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.J,{htmlFor:"slug",children:"URL Slug *"}),(0,a.jsx)(n.p,{id:"slug",name:"slug",value:_.slug,onChange:H,placeholder:"article-url-slug",required:!0}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"The slug will be used in the article URL (e.g., /articles/article-url-slug)"})]})]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>L(!1),disabled:q,children:"Cancel"}),(0,a.jsx)(c.$,{onClick:X,disabled:q,children:q?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}),T?"Updating...":"Creating..."]}):T?"Update Article":"Create Article"})]})]})})]})};function k(){return(0,r.useRouter)(),(0,a.jsx)("div",{className:"container mx-auto py-10",children:(0,a.jsx)(b,{})})}},92021:(e,s,t)=>{Promise.resolve().then(t.bind(t,15993))}},e=>{var s=s=>e(e.s=s);e.O(0,[5004,277,4277,1615,2898,2208,1071,9613,6521,2356,8441,1684,7358],()=>s(92021)),_N_E=e.O()}]);