(()=>{var e={};e.id=5458,e.ids=[5458],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28761:(e,s,i)=>{"use strict";i.r(s),i.d(s,{GlobalError:()=>l.a,__next_app__:()=>h,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=i(65239),t=i(48088),a=i(88170),l=i.n(a),n=i(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);i.d(s,o);let c={children:["",{children:["admin",{children:["scholarships",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,36081)),"/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/admin/scholarships/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,58014)),"/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.bind(i,31142)),"/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/admin/scholarships/page.tsx"],h={require:i,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/admin/scholarships/page",pathname:"/admin/scholarships",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34879:(e,s,i)=>{Promise.resolve().then(i.bind(i,36081))},36081:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>r});let r=(0,i(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/admin/scholarships/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/mnt/d/downloads/git changes/migration/Sg-with-ssr-migration-10-again/app/admin/scholarships/page.tsx","default")},40228:(e,s,i)=>{"use strict";i.d(s,{A:()=>r});let r=(0,i(62688).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},45655:(e,s,i)=>{Promise.resolve().then(i.bind(i,51850))},51850:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>q});var r=i(60687),t=i(43210),a=i(16189),l=i(17456),n=i(35390),o=i(77636),c=i(76582),d=i(20776),h=i(19112),p=i(24298),m=i(7566),x=i(2734),u=i(65813),j=i(96474),g=i(99270),y=i(10022),v=i(65777),f=i(41862),w=i(57175),N=i(88233);let k=(0,i(62688).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var b=i(40228),C=i(81997);let A={title:"",description:"",summary:"",slug:"",university:"",country:"",amount:"",deadline:"",requirements:"",applicationLink:"",isFeatured:!1,image:"",seo:{metaTitle:"",metaDescription:"",keywords:[]}},S=()=>{let[e,s]=(0,t.useState)([]),[i,a]=(0,t.useState)(!0),[S,q]=(0,t.useState)(""),[F,E]=(0,t.useState)(null),[T,_]=(0,t.useState)(!1),[L,P]=(0,t.useState)(!1),[D,J]=(0,t.useState)("list"),[U,M]=(0,t.useState)(A),[$,z]=(0,t.useState)(!1),[I,R]=(0,t.useState)("basic"),{toast:O}=(0,m.d)();(0,t.useEffect)(()=>{B()},[]);let B=async()=>{a(!0);try{if(!localStorage.getItem("adminToken"))throw Error("Authentication required");let e=await fetch("/api/scholarships");if(!e.ok)throw Error("Failed to fetch scholarships");let i=await e.json();s(i)}catch(e){console.error("Error fetching scholarships:",e),O({title:"Error fetching scholarships",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}finally{a(!1)}},G=e=>{_(!0),M(e),E(e),P(!0),R("basic")},H=async i=>{if(confirm("Are you sure you want to delete this scholarship?"))try{let r=localStorage.getItem("adminToken");if(!r)throw Error("Authentication required");if(!(await fetch(`/api/admin/scholarships/${i}`,{method:"DELETE",headers:{"x-auth-token":r}})).ok)throw Error("Failed to delete scholarship");s(e.filter(e=>e._id!==i&&e.id!==i)),O({title:"Scholarship deleted",description:"The scholarship has been deleted successfully",variant:"default"})}catch(e){console.error("Error deleting scholarship:",e),O({title:"Error deleting scholarship",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}},X=async()=>{z(!0);try{let i=localStorage.getItem("adminToken");if(!i)throw Error("Authentication required");if(!U.title||!U.description||!U.university)throw Error("Title, description, and university are required");let r={...U,seo:{...U.seo,keywords:"string"==typeof U.seo.keywords?String(U.seo.keywords).split(",").map(e=>e.trim()).filter(Boolean):Array.isArray(U.seo.keywords)?U.seo.keywords:[]}},t=F?.id||F?._id,a=T?`/api/admin/scholarships/${t}`:"/api/admin/scholarships",l=await fetch(a,{method:T?"PUT":"POST",headers:{"Content-Type":"application/json","x-auth-token":i},body:JSON.stringify(r)});if(!l.ok){let e=await l.json();throw Error(e.error||"Failed to save scholarship")}let n=await l.json();T?s(e.map(e=>e.id===n.id||e._id===n._id?n:e)):s([...e,n]),P(!1),O({title:T?"Scholarship updated":"Scholarship created",description:T?"The scholarship has been updated successfully":"A new scholarship has been created successfully",variant:"default"})}catch(e){console.error("Error saving scholarship:",e),O({title:"Error saving scholarship",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}finally{z(!1)}},Z=e=>{let{name:s,value:i}=e.target;if(s.includes(".")){let[e,r]=s.split(".");if("seo"===e)M({...U,seo:{...U.seo,[r]:i}});else{let s=U[e];s&&"object"==typeof s&&!Array.isArray(s)?M({...U,[e]:{...s,[r]:i}}):M({...U,[e]:{[r]:i}})}}else M({...U,[s]:i})},K=(e,s)=>{M({...U,[e]:s})},W=e.filter(e=>e.title.toLowerCase().includes(S.toLowerCase())||e.university.toLowerCase().includes(S.toLowerCase())||e.country.toLowerCase().includes(S.toLowerCase()));return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Scholarships"}),(0,r.jsx)("p",{className:"text-slate-500 mt-2",children:"Manage scholarships for universities"})]}),(0,r.jsxs)(n.$,{onClick:()=>{_(!1),M(A),E(null),P(!0),R("basic")},children:[(0,r.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Add Scholarship"]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,r.jsx)(g.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-500"}),(0,r.jsx)(o.p,{type:"search",placeholder:"Search scholarships...",className:"pl-8",value:S,onChange:e=>q(e.target.value)})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.$,{variant:"list"===D?"secondary":"ghost",size:"icon",onClick:()=>J("list"),children:(0,r.jsx)(y.A,{className:"h-4 w-4"})}),(0,r.jsx)(n.$,{variant:"grid"===D?"secondary":"ghost",size:"icon",onClick:()=>J("grid"),children:(0,r.jsx)(v.A,{className:"h-4 w-4"})})]})]}),i?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(f.A,{className:"h-10 w-10 animate-spin text-primary-500"})}):(0,r.jsx)(r.Fragment,{children:"list"===D?(0,r.jsx)(l.Zp,{children:(0,r.jsx)(l.Wu,{className:"p-0",children:(0,r.jsxs)(d.XI,{children:[(0,r.jsx)(d.A0,{children:(0,r.jsxs)(d.Hj,{children:[(0,r.jsx)(d.nd,{children:"Title"}),(0,r.jsx)(d.nd,{children:"University"}),(0,r.jsx)(d.nd,{children:"Country"}),(0,r.jsx)(d.nd,{children:"Amount"}),(0,r.jsx)(d.nd,{children:"Deadline"}),(0,r.jsx)(d.nd,{children:"Featured"}),(0,r.jsx)(d.nd,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(d.BF,{children:0===W.length?(0,r.jsx)(d.Hj,{children:(0,r.jsx)(d.nA,{colSpan:7,className:"text-center text-slate-500 py-10",children:"No scholarships found"})}):W.map(e=>(0,r.jsxs)(d.Hj,{children:[(0,r.jsx)(d.nA,{className:"font-medium",children:e.title}),(0,r.jsx)(d.nA,{children:e.university}),(0,r.jsx)(d.nA,{children:e.country}),(0,r.jsx)(d.nA,{children:e.amount}),(0,r.jsx)(d.nA,{children:e.deadline&&new Date(e.deadline).toLocaleDateString()}),(0,r.jsx)(d.nA,{children:e.isFeatured?(0,r.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:"Yes"}):(0,r.jsx)("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-xs font-medium text-slate-800",children:"No"})}),(0,r.jsx)(d.nA,{className:"text-right",children:(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>G(e),children:(0,r.jsx)(w.A,{className:"h-4 w-4"})}),(0,r.jsx)(n.$,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>H(e.id||e._id||""),children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})]})})]},e.id||e._id))})]})})}):(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:0===W.length?(0,r.jsx)("div",{className:"col-span-full text-center text-slate-500 py-10",children:"No scholarships found"}):W.map(e=>(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{className:"pb-2",children:[(0,r.jsx)(l.ZB,{className:"text-lg text-ellipsis overflow-hidden whitespace-nowrap",title:e.title,children:e.title}),(0,r.jsxs)(l.BT,{className:"flex justify-between",children:[(0,r.jsx)("span",{children:e.university}),(0,r.jsx)("span",{children:e.country})]})]}),(0,r.jsxs)(l.Wu,{className:"pb-2 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(k,{className:"h-4 w-4 mr-1 text-green-600"}),(0,r.jsx)("span",{children:e.amount})]}),(0,r.jsxs)("div",{className:"flex items-center text-sm",children:[(0,r.jsx)(b.A,{className:"h-4 w-4 mr-1 text-blue-600"}),(0,r.jsx)("span",{children:e.deadline&&new Date(e.deadline).toLocaleDateString()})]})]}),(0,r.jsxs)(l.wL,{className:"justify-between",children:[(0,r.jsx)("div",{children:e.isFeatured&&(0,r.jsx)("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:"Featured"})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>G(e),children:(0,r.jsx)(w.A,{className:"h-4 w-4"})}),(0,r.jsx)(n.$,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>H(e.id||e._id||""),children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})]})]})]},e.id||e._id))})}),(0,r.jsx)(p.lG,{open:L,onOpenChange:P,children:(0,r.jsxs)(p.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(p.c7,{children:[(0,r.jsx)(p.L3,{children:T?"Edit Scholarship":"Create New Scholarship"}),(0,r.jsx)(p.rr,{children:T?"Make changes to the scholarship":"Add a new scholarship to your collection"})]}),(0,r.jsxs)(x.tU,{value:I,onValueChange:R,children:[(0,r.jsxs)(x.j7,{className:"grid grid-cols-3 mb-6",children:[(0,r.jsx)(x.Xi,{value:"basic",children:"Basic Info"}),(0,r.jsx)(x.Xi,{value:"details",children:"Details"}),(0,r.jsx)(x.Xi,{value:"seo",children:"SEO & Metadata"})]}),(0,r.jsx)(x.av,{value:"basic",className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"title",children:"Title *"}),(0,r.jsx)(o.p,{id:"title",name:"title",value:U.title,onChange:Z,placeholder:"Scholarship title",required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"university",children:"University *"}),(0,r.jsx)(o.p,{id:"university",name:"university",value:U.university,onChange:Z,placeholder:"University name",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"country",children:"Country *"}),(0,r.jsx)(o.p,{id:"country",name:"country",value:U.country,onChange:Z,placeholder:"Country",required:!0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"amount",children:"Amount *"}),(0,r.jsx)(o.p,{id:"amount",name:"amount",value:U.amount,onChange:Z,placeholder:"e.g. $5,000 or Full Tuition",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"deadline",children:"Application Deadline"}),(0,r.jsx)(o.p,{id:"deadline",name:"deadline",type:"date",value:U.deadline?.split("T")[0],onChange:Z})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"summary",children:"Summary *"}),(0,r.jsx)(h.T,{id:"summary",name:"summary",value:U.summary,onChange:Z,placeholder:"Brief overview of the scholarship",required:!0,rows:3})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"image",children:"Scholarship Image URL"}),(0,r.jsx)(o.p,{id:"image",name:"image",value:U.image,onChange:Z,placeholder:"https://example.com/image.jpg"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(u.S,{id:"isFeatured",checked:U.isFeatured,onCheckedChange:e=>K("isFeatured",e)}),(0,r.jsx)(c.J,{htmlFor:"isFeatured",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Feature this scholarship (will be displayed prominently)"})]})]})}),(0,r.jsx)(x.av,{value:"details",className:"space-y-4",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"description",children:"Full Description *"}),(0,r.jsx)(C.A,{content:U.description,onChange:e=>{M({...U,description:e})},placeholder:"Start writing detailed scholarship information...",className:"min-h-[400px]"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Provide detailed information about the scholarship, eligibility, benefits, etc."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"requirements",children:"Requirements"}),(0,r.jsx)(h.T,{id:"requirements",name:"requirements",value:U.requirements,onChange:Z,placeholder:"List of requirements for this scholarship",rows:4})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"applicationLink",children:"Application Link"}),(0,r.jsx)(o.p,{id:"applicationLink",name:"applicationLink",value:U.applicationLink,onChange:Z,placeholder:"https://example.com/apply"})]})]})}),(0,r.jsxs)(x.av,{value:"seo",className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"seo.metaTitle",children:"Meta Title"}),(0,r.jsx)(o.p,{id:"seo.metaTitle",name:"seo.metaTitle",value:U.seo.metaTitle,onChange:Z,placeholder:"SEO title (if different from scholarship title)"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"If left empty, the scholarship title will be used"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"seo.metaDescription",children:"Meta Description"}),(0,r.jsx)(h.T,{id:"seo.metaDescription",name:"seo.metaDescription",value:U.seo.metaDescription,onChange:Z,placeholder:"SEO description",rows:3}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"If left empty, the scholarship summary will be used"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"seo.keywords",children:"Keywords"}),(0,r.jsx)(o.p,{id:"seo.keywords",name:"seo.keywords",value:Array.isArray(U.seo.keywords)?U.seo.keywords.join(", "):U.seo.keywords,onChange:Z,placeholder:"keyword1, keyword2, keyword3"}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"Comma-separated list of keywords"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(c.J,{htmlFor:"slug",children:"URL Slug *"}),(0,r.jsx)(o.p,{id:"slug",name:"slug",value:U.slug,onChange:Z,placeholder:"scholarship-url-slug",required:!0}),(0,r.jsx)("p",{className:"text-xs text-slate-500",children:"The slug will be used in the scholarship URL (e.g., /scholarships/scholarship-url-slug)"})]})]})]}),(0,r.jsxs)(p.Es,{children:[(0,r.jsx)(n.$,{variant:"outline",onClick:()=>P(!1),disabled:$,children:"Cancel"}),(0,r.jsx)(n.$,{onClick:X,disabled:$,children:$?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),T?"Updating...":"Creating..."]}):T?"Update Scholarship":"Create Scholarship"})]})]})})]})};function q(){return(0,a.useRouter)(),(0,r.jsx)("div",{className:"container mx-auto py-10",children:(0,r.jsx)(S,{})})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")}};var s=require("../../../webpack-runtime.js");s.C(e);var i=e=>s(s.s=e),r=s.X(0,[4447,7696,6620,1797,3759,880],()=>i(28761));module.exports=r})();