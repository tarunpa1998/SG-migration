"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3555],{13555:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var o=r(95155),a=r(12115),n=r(29571),s=r(60760),i=r(50429);let l={hidden:{opacity:0,y:20,scale:.8},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",damping:15,stiffness:200,duration:.4}},exit:{opacity:0,y:-10,transition:{duration:.2}}},d={wave:{rotate:[0,15,-5,15,0],transition:{duration:1.5,repeat:1/0,repeatType:"loop",ease:"easeInOut",repeatDelay:1}}},c={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}}},u={hidden:{opacity:0,scale:.8,y:10},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",damping:15,stiffness:200,duration:.3}},exit:{opacity:0,scale:.8,y:-10,transition:{duration:.3,ease:"easeOut"}}},m=()=>{let[e,t]=(0,a.useState)(!1),[r,m]=(0,a.useState)("350px"),[h,p]=(0,a.useState)([]),[x,f]=(0,a.useState)(0),[y,b]=(0,a.useState)(!1),[g,v]=(0,a.useState)(""),[w,j]=(0,a.useState)({name:"",location:"",studyLevel:"",destinationCountry:null,subject:"",languageScore:"",startDate:""}),[N,k]=(0,a.useState)(!0),[C,S]=(0,a.useState)(!1),[M,L]=(0,a.useState)(""),[P,E]=(0,a.useState)(!1),T=(0,a.useRef)(null),D=(0,a.useRef)(null),W=(0,a.useRef)(null),A=["Bachelor's","Master's","PhD","Diploma or Certification","Other"],z=["USA","UK","Canada","Australia","Germany","France","New Zealand","Singapore","Ireland","Other"],B=["Within 6 months","This year","Next year","Not sure yet"],H=["Yes","No","Planning to take it soon"];(0,a.useEffect)(()=>{T.current&&W.current&&(T.current.scrollIntoView({behavior:"smooth",block:"nearest"}),W.current.scrollTo&&W.current.scrollTo({top:W.current.scrollHeight,behavior:"smooth"})),N&&D.current&&e&&setTimeout(()=>{var e;null==(e=D.current)||e.focus()},300)},[h,N,e]),(0,a.useEffect)(()=>{0===h.length?m("320px"):h.length<=2?m("420px"):h.length<=4?m("480px"):m("520px")},[h.length]);let[Y,O]=(0,a.useState)(!1),[R,V]=(0,a.useState)(0);(0,a.useEffect)(()=>{var e;if(!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return;let t=null==(e=document.querySelector('meta[name="viewport"]'))?void 0:e.getAttribute("content"),r=()=>{let e=document.querySelector('meta[name="viewport"]');e&&e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),O(!0),document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top="-".concat(window.scrollY,"px"),document.body.dataset.scrollY=window.scrollY.toString(),setTimeout(()=>{W.current&&(W.current.scrollTop=W.current.scrollHeight)},100)},o=()=>{let e=document.querySelector('meta[name="viewport"]');e&&t&&e.setAttribute("content",t),O(!1);let r=document.body.dataset.scrollY||"0";document.body.style.position="",document.body.style.width="",document.body.style.top="",window.scrollTo(0,parseInt(r))};return D.current&&(D.current.addEventListener("focus",r),D.current.addEventListener("blur",o)),()=>{D.current&&(D.current.removeEventListener("focus",r),D.current.removeEventListener("blur",o)),document.body.style.position="",document.body.style.width="",document.body.style.top="";let e=document.querySelector('meta[name="viewport"]');e&&t&&e.setAttribute("content",t)}},[]);let I=()=>{t(!0),G("bot","Great to meet you! What's your full name?"),k(!0),S(!1),f(1)},G=(e,t,r,o)=>{let a=Date.now()+Math.random();b(!1),setTimeout(()=>{p(n=>[...n,{id:a,type:e,text:t,options:r,countries:o}])},50)},U=e=>{G("user",e),b(!0),setTimeout(()=>{switch(x){case 1:j(t=>({...t,name:e})),G("bot","Thanks, ".concat(e,"! Where are you from?")),f(2);break;case 2:j(t=>({...t,location:e})),G("bot","Awesome! What level of study are you planning for?",A),S(!0),k(!1),f(3);break;case 3:j(t=>({...t,studyLevel:e})),G("bot","Got it. Do you already have a destination country in mind?",["Yes","No"]),S(!0),k(!1),f(4);break;case 4:j(t=>({...t,destinationCountry:e})),G("bot","What subject or field are you interested in?"),E(!1),k(!0),f(5);break;case 5:j(t=>({...t,subject:e})),G("bot","Do you already have your IELTS/TOEFL score or plan to take it?",H),S(!0),k(!1),f(6);break;default:G("bot","I didn't understand that. Please follow the prompts.")}},2e3)},q=e=>{if(L(e),"Other"===e){k(!0),S(!1);return}F(e)},F=e=>{G("user",e),b(!0),setTimeout(()=>{switch(x){case 3:j(t=>({...t,studyLevel:e})),G("bot","Got it. Do you already have a destination country in mind?",["Yes","No"]),S(!0),k(!1),f(4);break;case 4:"Yes"===e?(G("bot","Which country are you aiming for?",void 0,z),E(!0),S(!1)):(j(e=>({...e,destinationCountry:null})),G("bot","No problem! Some top destinations are USA, UK, Canada, Australia, and Germany. You can explore more on our country pages."),G("bot","What subject or field are you interested in?"),k(!0),S(!1),f(5));break;case 6:j(t=>({...t,languageScore:e})),G("bot","Perfect! One last question â€” when are you planning to start your studies abroad?",B),f(7);break;case 7:j(t=>({...t,startDate:e})),G("bot","Thank you for sharing your details! Our education experts will review your preferences and get in touch shortly. You're one step closer to studying abroad!"),setTimeout(()=>{G("bot","Would you like to book a free consultation with our expert?",["Yes, Book Now","No, thanks"]),f(8)},2e3);break;case 8:"Yes, Book Now"===e?(G("bot","Great! Please visit our contact page to schedule your free consultation. Our experts will help you plan your study abroad journey."),G("bot","You can also reach us directly:")):G("bot","No problem! Feel free to browse our website for more information about studying abroad. We're here to help whenever you're ready."),k(!1),S(!1),f(9)}},2e3)},_=e=>{if("Other"===e){k(!0),E(!1);return}G("user",e),j(t=>({...t,destinationCountry:e})),b(!0),setTimeout(()=>{G("bot","What subject or field are you interested in?"),E(!1),k(!0),f(5)},2e3)};return(0,o.jsx)("section",{className:"py-16 bg-background border-y border-border",children:(0,o.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[(0,o.jsxs)("div",{className:"text-center mb-10",children:[(0,o.jsx)("h2",{className:"text-2xl md:text-3xl font-bold mb-4 text-foreground",children:"Start Your Study Abroad Journey"}),(0,o.jsx)("p",{className:"mt-2 text-muted-foreground max-w-2xl mx-auto",children:"Chat with our education advisor to get personalized guidance for your international education plans."})]}),(0,o.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,o.jsx)("div",{className:"relative flex flex-col items-center transition-all duration-500 ease-in-out ".concat(e?"min-h-[350px]":"min-h-[320px]"),children:(0,o.jsxs)(n.P.div,{layout:!0,initial:{height:"auto",width:"auto"},animate:{height:e?r:"auto",width:"100%"},transition:{duration:.5,type:"spring",stiffness:100},className:"bg-card border border-border rounded-3xl shadow-xl overflow-hidden flex flex-col w-full ".concat(Y?"keyboard-visible":""),children:[(0,o.jsxs)(n.P.div,{layout:!0,className:"p-5 bg-primary text-primary-foreground flex items-center justify-between",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"w-14 h-14 rounded-full bg-primary-foreground/20 flex items-center justify-center mr-4",children:(0,o.jsx)(n.P.div,{animate:"wave",variants:d,children:(0,o.jsxs)("svg",{className:"h-8 w-8 text-primary-foreground",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"}),(0,o.jsx)("path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"}),(0,o.jsx)("path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"}),(0,o.jsx)("path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"})]})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"font-bold text-xl font-handwriting",children:"StudyGuru Chat"}),(0,o.jsx)("p",{className:"text-sm text-primary-foreground/80",children:"We're here to help!"})]})]}),e&&(0,o.jsx)("button",{onClick:()=>t(!1),className:"text-primary-foreground/80 hover:text-primary-foreground",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e&&(0,o.jsxs)(n.P.div,{layout:!0,className:"flex-1 p-4 overflow-y-auto messages-container-wrapper bg-card",style:{maxHeight:"350px"},initial:"hidden",animate:"visible",variants:c,children:[(0,o.jsx)("div",{ref:W,className:"messages-container",children:h.map(e=>(0,o.jsxs)(n.P.div,{layout:!0,variants:l,initial:"hidden",animate:"visible",exit:"exit",className:"mb-4 flex ".concat("user"===e.type?"justify-end":"justify-start"),children:["bot"===e.type&&(0,o.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center mr-3 flex-shrink-0",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,o.jsx)("path",{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"}),(0,o.jsx)("path",{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"})]})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"rounded-2xl py-3 px-5 max-w-xs md:max-w-md inline-block ".concat("user"===e.type?"bg-primary text-primary-foreground ml-2":"bg-secondary text-secondary-foreground"),children:(0,o.jsx)("p",{children:e.text})}),e.options&&C&&(0,o.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:e.options.map((e,t)=>(0,o.jsx)("button",{className:"py-2 px-4 bg-accent hover:bg-accent/80 text-accent-foreground rounded-full text-sm transition-colors duration-200 border border-border",onClick:()=>q(e),children:e},t))}),e.countries&&P&&(0,o.jsx)("div",{className:"mt-3 grid grid-cols-2 gap-2",children:e.countries.map((e,t)=>(0,o.jsx)("button",{className:"py-2 px-4 bg-accent hover:bg-accent/80 text-accent-foreground rounded-full text-sm transition-colors duration-200 border border-border",onClick:()=>_(e),children:e},t))})]})]},"message-".concat(e.id)))}),(0,o.jsx)(s.N,{mode:"wait",children:y&&(0,o.jsxs)(n.P.div,{variants:u,initial:"hidden",animate:"visible",exit:"exit",className:"flex justify-start mb-4",children:[(0,o.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center mr-3 flex-shrink-0",children:(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,o.jsx)("path",{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"}),(0,o.jsx)("path",{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"})]})}),(0,o.jsx)("div",{className:"rounded-2xl py-3 px-5 bg-secondary text-secondary-foreground",children:(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("div",{className:"h-2.5 w-2.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,o.jsx)("div",{className:"h-2.5 w-2.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"150ms"}}),(0,o.jsx)("div",{className:"h-2.5 w-2.5 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]},"typing-indicator")}),9===x&&(0,o.jsxs)(n.P.div,{variants:l,initial:"hidden",animate:"visible",className:"mt-8 bg-muted rounded-xl p-4 shadow-md",children:[(0,o.jsx)("h3",{className:"font-bold text-lg mb-2 text-foreground",children:"Contact Us"}),(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),(0,o.jsx)("span",{className:"text-foreground",children:"support@studyguruindia.com"})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),(0,o.jsx)("span",{className:"text-foreground",children:"+91 99999-99999"})]}),(0,o.jsxs)("div",{className:"flex mt-4 gap-2",children:[(0,o.jsxs)("button",{className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg flex items-center justify-center",onClick:()=>window.open("https://wa.me/919999999999","_blank"),children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"#ffffff",className:"mr-2",children:(0,o.jsx)("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"})}),"WhatsApp"]}),(0,o.jsx)("button",{className:"flex-1 bg-primary hover:bg-primary/90 text-primary-foreground py-2 px-4 rounded-lg",onClick:()=>window.location.href="/contact",children:"Contact Us"})]})]})]},"contact-section"),(0,o.jsx)("div",{ref:T})]}),e?(0,o.jsx)(n.P.div,{layout:!0,className:"p-4 border-t border-border",children:N&&(0,o.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),""!==g.trim()||0===x){if(0===x){"hi"===g.toLowerCase().trim()||"hello"===g.toLowerCase().trim()?I():(G("user",g),b(!0),setTimeout(()=>{G("bot",'Please say "Hi" to start the conversation \uD83D\uDE0A')},2e3)),v("");return}U(g),v("")}},className:"flex items-center gap-2",children:[(0,o.jsx)("input",{ref:D,type:"text",placeholder:"Type your message...",value:g,onChange:e=>v(e.target.value),className:"flex-1 py-3 px-4 rounded-full bg-muted text-foreground border border-input focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",autoFocus:!0}),(0,o.jsx)("button",{type:"submit",className:"h-12 w-12 rounded-full bg-primary hover:bg-primary/90 text-primary-foreground flex items-center justify-center transition-colors",children:(0,o.jsx)(i.A,{className:"h-5 w-5"})})]})}):(0,o.jsxs)(n.P.div,{variants:l,initial:"hidden",animate:"visible",className:"p-8 flex flex-col items-center",children:[(0,o.jsxs)("button",{onClick:()=>{m("280px"),t(!0),setTimeout(()=>{G("user","Hi"),b(!0),setTimeout(()=>{G("bot","Great to meet you! What's your full name?"),k(!0),S(!1),f(1)},2e3)},100)},className:"bg-transparent border border-primary hover:bg-accent text-foreground text-lg font-medium rounded-full px-10 py-4 transition-all duration-300 hover:scale-105 w-full flex items-center justify-center gap-3 relative overflow-hidden",children:[(0,o.jsx)(n.P.span,{animate:{rotate:[0,20,-20,20,0],transition:{duration:1.2,repeat:1/0,repeatType:"loop",ease:"easeInOut",repeatDelay:1}},className:"text-2xl",children:"\uD83D\uDC4B"}),(0,o.jsx)("span",{className:"font-handwriting text-xl",children:"Say Hi"})]}),(0,o.jsx)("p",{className:"text-sm text-center mt-4 text-muted-foreground",children:"Chat with our education consultant"})]})]})})})]})})}},50429:(e,t,r)=>{r.d(t,{A:()=>o});let o=(0,r(19946).A)("SendHorizontal",[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]])},60760:(e,t,r)=>{r.d(t,{N:()=>y});var o=r(95155),a=r(12115),n=r(80845),s=r(82885),i=r(51508);class l extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function d(e){let{children:t,isPresent:r}=e,n=(0,a.useId)(),s=(0,a.useRef)(null),d=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:c}=(0,a.useContext)(i.Q);return(0,a.useInsertionEffect)(()=>{let{width:e,height:t,top:o,left:a}=d.current;if(r||!s.current||!e||!t)return;s.current.dataset.motionPopId=n;let i=document.createElement("style");return c&&(i.nonce=c),document.head.appendChild(i),i.sheet&&i.sheet.insertRule('\n          [data-motion-pop-id="'.concat(n,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(o,"px !important;\n            left: ").concat(a,"px !important;\n          }\n        ")),()=>{document.head.removeChild(i)}},[r]),(0,o.jsx)(l,{isPresent:r,childRef:s,sizeRef:d,children:a.cloneElement(t,{ref:s})})}let c=e=>{let{children:t,initial:r,isPresent:i,onExitComplete:l,custom:c,presenceAffectsLayout:m,mode:h}=e,p=(0,s.M)(u),x=(0,a.useId)(),f=(0,a.useCallback)(e=>{for(let t of(p.set(e,!0),p.values()))if(!t)return;l&&l()},[p,l]),y=(0,a.useMemo)(()=>({id:x,initial:r,isPresent:i,custom:c,onExitComplete:f,register:e=>(p.set(e,!1),()=>p.delete(e))}),m?[Math.random(),f]:[i,f]);return(0,a.useMemo)(()=>{p.forEach((e,t)=>p.set(t,!1))},[i]),a.useEffect(()=>{i||p.size||!l||l()},[i]),"popLayout"===h&&(t=(0,o.jsx)(d,{isPresent:i,children:t})),(0,o.jsx)(n.t.Provider,{value:y,children:t})};function u(){return new Map}var m=r(90869),h=r(54542);let p=e=>e.key||"";function x(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}var f=r(97494);let y=e=>{let{children:t,exitBeforeEnter:r,custom:n,initial:i=!0,onExitComplete:l,presenceAffectsLayout:d=!0,mode:u="sync"}=e;(0,h.V)(!r,"Replace exitBeforeEnter with mode='wait'");let y=(0,a.useMemo)(()=>x(t),[t]),b=y.map(p),g=(0,a.useRef)(!0),v=(0,a.useRef)(y),w=(0,s.M)(()=>new Map),[j,N]=(0,a.useState)(y),[k,C]=(0,a.useState)(y);(0,f.E)(()=>{g.current=!1,v.current=y;for(let e=0;e<k.length;e++){let t=p(k[e]);b.includes(t)?w.delete(t):!0!==w.get(t)&&w.set(t,!1)}},[k,b.length,b.join("-")]);let S=[];if(y!==j){let e=[...y];for(let t=0;t<k.length;t++){let r=k[t],o=p(r);b.includes(o)||(e.splice(t,0,r),S.push(r))}"wait"===u&&S.length&&(e=S),C(x(e)),N(y);return}let{forceRender:M}=(0,a.useContext)(m.L);return(0,o.jsx)(o.Fragment,{children:k.map(e=>{let t=p(e),r=y===k||b.includes(t);return(0,o.jsx)(c,{isPresent:r,initial:(!g.current||!!i)&&void 0,custom:r?void 0:n,presenceAffectsLayout:d,mode:u,onExitComplete:r?void 0:()=>{if(!w.has(t))return;w.set(t,!0);let e=!0;w.forEach(t=>{t||(e=!1)}),e&&(null==M||M(),C(v.current),l&&l())},children:e},t)})})}}}]);